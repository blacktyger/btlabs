{% load humanize %}

<div class="card">
    <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2">
        <div class="bg-gradient-success bg-green shadow-success border-radius-lg pt-4 pb-3">
            <h5 class="text-white text-capitalize ps-3">Funding Report</h5>
        </div>
    </div>

    <div class="text-end text-xs mt-2 px-4">Last update: {{last_update|naturaltime}}</div>

    <div class="card-body px-0 pb-2">
        <div class="row p-3">
            <div class="col-12 mb-xl-0 mb-4">
                <div class="card mb-3">
                    <div class="card-header p-3 pt-2">
                        <div class="icon icon-lg icon-shape bg-gradient-success shadow-dark text-center border-radius-xl mt-n4 position-absolute">
                            <i class="material-icons opacity-10">payments</i>
                        </div>
                        <div class="text-end pt-1">
                            <p class="text-sm mb-0 text-capitalize">Total Funds Received</p>
                            <h4 class="mb-0">${{ total }}</h4>
                        </div>
                    </div>

                <hr class="dark horizontal my-0">

                <div class="card-footer p-3">
                    <div class="row justify-content-between align-items-center">
                        <div class="col-6 text-start">
                            <p class="mb-0 text-xs">
                                <span class="text-success text-sm font-weight-bolder">
                                    {{ total_payments }}
                                </span>
                                Payments
                            </p>
                        </div>

                        <div class="col-6 text-end">
{#                            <!-- Button trigger modal -->#}
                            <a type="button" class="text-xs" data-bs-toggle="modal" data-bs-target="#paymentHistory">
                                <i class="fas fa-history"></i> History
                            </a>
                        </div>
                    </div>
                </div>
              </div>
            </div>

            <hr />

            {# GOAL I #}
            <div class="col-12 mb-xl-0 my-3 mt-4">
                <div class="card mb-3">
                    <div class="card-header p-3 pt-2">
                        <div class="icon icon-lg icon-shape bg-gradient-secondary shadow-dark text-center border-radius-xl mt-n4 position-absolute">
                            <i class="material-icons opacity-10">monetization_on</i>
                        </div>
                        <div class="text-end pt-1">
                            <p class="text-sm mb-0 text-capitalize">Giver Of Epic</p>
                            <h4 class="mb-0 text-success">${{milestone_giver_goal}}</h4>
                        </div>
                    </div>
                    <hr class="dark horizontal my-0" />
                    <div class="card-footer p-3">

                        <div class="progress-wrapper mx-auto">
                            <div class="progress-info">
<!--                                <div class="progress-percentage text-end ">-->
<!--                                    <span class="text-xs font-weight-bold">9%</span>-->
<!--                                </div>-->
                                <div class="row justify-content-between align-items-center">
                                     <div class="col-6 text-start">
                                         <p class="mb-0 text-dark text-xs font-weight-bold">{{ milestone_giver_in_percent }}%</p>
                                    </div>

                                    <div class="col-6 text-end">
                                        <p class="mb-0 text-xs font-weight-bold">
                                            <span class=" text-success">${{ milestone_giver }}</span>
                                                /
                                            <span class=" text-dark">{{ milestone_giver_goal }} </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-gradient-success" style="width: {{ milestone_giver_in_percent }}%;" role="progressbar"
                                     aria-valuenow="{{ milestone_giver_in_percent }}" aria-valuemin="0" aria-valuemax="100">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {# GOAL II #}
            <div class="col-12 mb-xl-0 my-3">
                <div class="card mb-3">
                    <div class="card-header p-3 pt-2">
                        <div class="icon icon-lg icon-shape bg-gradient-info shadow-dark text-center border-radius-xl mt-n4 position-absolute">
                            <i class="material-icons opacity-10">monetization_on</i>
                        </div>
                        <div class="text-end pt-1">
                            <p class="text-sm mb-0 text-capitalize">EPIC Tip-Bot</p>
                            <h4 class="mb-0 text-success">${{milestone_tipbot_goal}}</h4>
                        </div>
                    </div>
                    <hr class="dark horizontal my-0" />
                    <div class="card-footer p-3">

                        <div class="progress-wrapper mx-auto">
                            <div class="progress-info">
<!--                                <div class="progress-percentage text-end ">-->
<!--                                    <span class="text-xs font-weight-bold">9%</span>-->
<!--                                </div>-->
                                <div class="row justify-content-between align-items-center">
                                     <div class="col-6 text-start">
                                         <p class="mb-0 text-dark text-xs font-weight-bold">{{ milestone_tipbot_in_percent }}%</p>
                                    </div>

                                    <div class="col-6 text-end">
                                        <p class="mb-0 text-xs font-weight-bold">
                                            <span class=" text-success">${{ milestone_tipbot }}</span>
                                                /
                                            <span class=" text-dark">{{milestone_tipbot_goal}} </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-gradient-success" style="width: {{ milestone_tipbot_in_percent }}%;" role="progressbar"
                                     aria-valuenow="{{ milestone_tipbot_in_percent }}" aria-valuemin="0" aria-valuemax="100">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {# GOAL III #}
            <div class="col-12 mb-xl-0 my-3">
                <div class="card mb-3">
                    <div class="card-header p-3 pt-2">
                        <div class="icon icon-lg icon-shape bg-gradient-primary shadow-dark text-center border-radius-xl mt-n4 position-absolute">
                            <i class="material-icons opacity-10">monetization_on</i>
                        </div>
                        <div class="text-end pt-1">
                            <p class="text-sm mb-0 text-capitalize">Web Wallet</p>
                            <h4 class="mb-0">${{milestone_epicweb_goal}}</h4>
                        </div>
                    </div>
                    <hr class="dark horizontal my-0" />
                    <div class="card-footer p-3">

                        <div class="progress-wrapper mx-auto">
                            <div class="progress-info">
<!--                                <div class="progress-percentage text-end ">-->
<!--                                    <span class="text-xs font-weight-bold">9%</span>-->
<!--                                </div>-->
                                <div class="row justify-content-between align-items-center">
                                     <div class="col-6 text-start">
                                         <p class="mb-0 text-dark text-xs font-weight-bold">0%</p>
                                    </div>

                                    <div class="col-6 text-end">
                                        <p class="mb-0 text-xs font-weight-bold">
                                            <span class=" text-warning">$0</span>
                                                /
                                            <span class=" text-dark">{{milestone_epicweb_goal}} </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-gradient-warning" style="width: 0%;" role="progressbar"
                                     aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

{#        <div class="table-responsive p-0">#}
{#            <table class="table align-items-center justify-content-center mb-0">#}
{#                 <thead>#}
{#                 <tr>#}
{#                    <th  class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"></th>#}
{#                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Budget</th>#}
{#                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Completion</th>#}
{#                 </tr>#}
{#                 </thead>#}
{#                 <tbody>#}
{##}
{#                 <!-- MILESTONE 0 -->#}
{#                 <tr>#}
{#                    <td>#}
{#                        <div class="d-flex px-2 py-1">#}
{#                           <div class="d-flex flex-column justify-content-center">#}
{#                               <h5 class="mb-2 text-success">Tip-Bot v1</h5>#}
{#                           </div>#}
{#                        </div>#}
{#                    </td>#}
{#                    <td class="align-middle text-center text-sm">#}
{#                        <span class="text-xs font-weight-bold"> $0 </span>#}
{#                    </td>#}
{#                    <td class="align-middle">#}
{#                        <div class="progress-wrapper w-75">#}
{#                            <div class="progress-info">#}
{#                                <div class="progress-percentage text-end ">#}
{#                                    <span class="text-xs font-weight-bold">100%</span>#}
{#                                </div>#}
{#                            </div>#}
{#                            <div class="progress">#}
{#                                <div class="progress-bar bg-gradient-success w-100" role="progressbar"#}
{#                                     aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}
{#                    </td>#}
{#                </tr>#}
{##}
{#                <!-- MILESTONE 1 -->#}
{#                <tr>#}
{#                    <td>#}
{#                        <div class="d-flex px-2 py-1">#}
{#                           <div class="d-flex flex-column justify-content-center">#}
{#                               <h5 class="mb-2 text-success">Tip-Bot v2</h5>#}
{#                           </div>#}
{#                        </div>#}
{#                    </td>#}
{#                    <td class="align-middle text-center text-sm">#}
{#                        <span class="text-xs font-weight-bold"> $5 000 </span>#}
{#                    </td>#}
{#                    <td class="align-middle">#}
{#                        <div class="progress-wrapper w-75">#}
{#                            <div class="progress-info">#}
{#                                <div class="progress-percentage text-end ">#}
{#                                    <span class="text-xs font-weight-bold">{{received_percent}}%</span>#}
{#                                </div>#}
{#                            </div>#}
{#                            <div class="progress">#}
{#                                <div class="progress-bar bg-gradient-warning" style="width: {{received_percent}}%;" role="progressbar"#}
{#                                     aria-valuenow="{{received_percent}}" aria-valuemin="0" aria-valuemax="100">#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}
{#                    </td>#}
{#                </tr>#}
{##}
{#                <!-- MILESTONE 2 -->#}
{#                <tr>#}
{#                    <td>#}
{#                        <div class="d-flex px-2 py-1">#}
{#                           <div class="d-flex flex-column justify-content-center">#}
{#                               <h5 class="mb-2 text-warning">Tip-Bot v3</h5>#}
{#                           </div>#}
{#                        </div>#}
{#                    </td>#}
{#                    <td class="align-middle text-center text-sm">#}
{#                        <span class="text-xs font-weight-bold"> $5 000 </span>#}
{#                    </td>#}
{#                    <td class="align-middle">#}
{#                        <div class="progress-wrapper w-75">#}
{#                            <div class="progress-info">#}
{#                                <div class="progress-percentage text-end ">#}
{#                                    <span class="text-xs font-weight-bold">0%</span>#}
{#                                </div>#}
{#                            </div>#}
{#                            <div class="progress">#}
{#                                <div class="progress-bar bg-gradient-warning w-0" role="progressbar"#}
{#                                     aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}
{#                    </td>#}
{#                </tr>#}
{##}
{#                <!-- MILESTONE 3 -->#}
{#                <tr>#}
{#                    <td>#}
{#                        <div class="d-flex px-2 py-1">#}
{#                           <div class="d-flex flex-column justify-content-center">#}
{#                               <h5 class="mb-2">Web Wallet</h5>#}
{#                           </div>#}
{#                        </div>#}
{#                    </td>#}
{#                    <td class="align-middle text-center text-sm">#}
{#                        <span class="text-xs font-weight-bold"> $5 000 </span>#}
{#                    </td>#}
{#                    <td class="align-middle">#}
{#                        <div class="progress-wrapper w-75">#}
{#                            <div class="progress-info">#}
{#                                <div class="progress-percentage text-end ">#}
{#                                    <span class="text-xs font-weight-bold">0%</span>#}
{#                                </div>#}
{#                            </div>#}
{#                            <div class="progress">#}
{#                                <div class="progress-bar bg-gradient-warning w-0" role="progressbar"#}
{#                                     aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}
{#                    </td>#}
{#                </tr>#}
{#            </tbody>#}
{#            </table>#}
{#        </div>#}
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="paymentHistory" tabindex="-1" aria-labelledby="paymentHistoryLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="paymentHistoryLabel">Payment History</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                {% include 'funding/payments.html' %}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>